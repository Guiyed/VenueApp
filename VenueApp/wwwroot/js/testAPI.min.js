"use strict";$(document).ready(function(){function n(t){if($("#events-panel").show(),$("#attraction-panel").hide(),t<0){t=0;return}t>0&&t>n.json.page.totalPages-1&&(t=0);$.ajax({type:"GET",url:"https://app.ticketmaster.com/discovery/v2/events.json?countryCode=US&city=Miami&apikey=rjvAOXYLhx1XPB30QYsgr5QVhQVO3U4b&size=5&page="+t,async:!0,dataType:"json",success:function(t){n.json=t;i(t)},error:function(n,t,i){console.log(i)}})}function i(n){var e=$("#events .list-group-item"),f,t,i;for(e.hide(),f=n._embedded.events,t=e.first(),i=0;i<f.length;i++){t.children(".list-group-item-heading").text(f[i].name);t.children(".list-group-item-text").text(f[i].dates.start.localDate);try{t.children(".venue").text(f[i]._embedded.venues[0].name+" in "+f[i]._embedded.venues[0].city.name)}catch(o){console.log(o)}t.show();t.off("click");t.click(f[i],function(n){console.log(n.data);try{r(n.data._embedded.attractions[0].id)}catch(t){console.log(t)}try{u(n.data._embedded.venues[0].id)}catch(t){console.log(t)}});t=t.next()}}function r(n){$.ajax({type:"GET",url:"https://app.ticketmaster.com/discovery/v2/attractions/"+n+".json?apikey=rjvAOXYLhx1XPB30QYsgr5QVhQVO3U4b",async:!0,dataType:"json",success:function(n){f(n)},error:function(n,t,i){console.log(i)}})}function u(n){$.ajax({type:"GET",url:"https://app.ticketmaster.com/discovery/v2/venues/"+n+".json?apikey=rjvAOXYLhx1XPB30QYsgr5QVhQVO3U4b",async:!0,dataType:"json",success:function(n){e(n,n.location.latitude,n.location.longitude)},error:function(n,t,i){console.log(i)}})}function f(i){$("#events-panel").hide();$("#attraction-panel").show();$("#myButton").click(()=>{n(t)});$("#attraction .list-group-item-heading").first().text(i.name);$("#attraction img").first().attr("src",i.images[0].url);$("#classification").text(i.classifications[0].segment.name+" - "+i.classifications[0].genre.name+" - "+i.classifications[0].subGenre.name)}function e(n,t,i){var r=new Microsoft.Maps.Map(document.getElementById("myMap"),{center:new Microsoft.Maps.Location(t,i),zoom:15}),u=new Microsoft.Maps.Pushpin(r.getCenter(),{color:"teal"});r.entities.push(u);$("#venueName").text(n.name+" - "+n.city.name+", "+n.state.stateCode)}var t=0;$("#prev").click(function(){n(--t)});$("#next").click(function(){n(++t)});n(t)});