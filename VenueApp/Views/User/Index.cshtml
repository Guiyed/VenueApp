@model List<VenueApp.Models.User>

@{
    ViewBag.Title = "Users Index";

    @using Microsoft.AspNetCore.Http
    @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

    string userType = @HttpContextAccessor.HttpContext.Session.GetString("Type") ?? "";

    int count = 1;
}

<h1>@ViewBag.Title</h1>


@if (ViewBag.Username.Length > 0)
{
    <h3>Welcome, @ViewBag.Username !!!</h3>
    <p class="text-success">You have Succsessfully Logged In (as an @userType) <span class="glyphicon glyphicon-ok " aria-hidden="true"></span></p>
}
else if (ViewBag.LogoutMessage.Length > 0)
{
    <p class="text-danger">You have Succsessfully Logged Out <span class="glyphicon glyphicon-log-out " aria-hidden="true"></span></p>
}
else if (ViewBag.Message.Length > 0)
{
    <p class="text-success">@ViewBag.Message<span class="glyphicon glyphicon-ok " aria-hidden="true"></span></p>
}
else if (ViewBag.ErrorMessage.Length > 0)
{
    <p class="text-danger">@ViewBag.ErrorMessage <span class="glyphicon glyphicon-remove " aria-hidden="true"></span></p>
}


<h2>List of Users on Database</h2>
@if (Model.Count == 0)
{
    <p>No users yet!</p>
}
else
{
    <table class="table table-hover">
        <tr>
            <th class="col-md-1">#</th>
            <th class="col-md-8">Name</th>
            <th class="col-md-3">Options</th>
        </tr>

        @foreach (var user in Model)
        {
            <tr>
                <td>@count</td>
                <td><a asp-controller="User" asp-action="Detail" asp-route-userId="@user.ID">@user.Username</a></td>
                <td class="right"><a asp-controller="User" asp-action="Edit" asp-route-userId="@user.ID">Edit</a> </td>
            </tr>
            count += 1;
        }
    </table>
}

<p><a asp-controller="User" asp-action="Add">Add User</a> | <a asp-controller="User" asp-action="Remove">Remove</a></p>

